#!/bin/bash

# Define the log file and its path
LOGFILE=~/script_log.txt

# Get the Process ID (PID) and execution location
PID=$$
EXECUTION_PATH=$(pwd)

# Output PID and execution path to terminal and log file
echo "Script is starting. PID: $PID, Executed from: $EXECUTION_PATH" | tee -a "$LOGFILE"

# Start a background task to kill this script after 5 minutes (300 seconds)
{
    sleep 300
    kill -9 $PID
    echo "Script $PID was automatically terminated after 5 minutes" >> "$LOGFILE"
} &

# A loop that repeatedly logs a message until the script is terminated
while true
do
    echo "Script is still running at $(date) with PID $PID, Executed from: $EXECUTION_PATH" | tee -a "$LOGFILE"
    sleep 1 # Delay to make it readable and prevent too quick writes
done