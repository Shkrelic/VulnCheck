#!/bin/bash

# Removing all subscriptions
sudo subscription-manager remove --all

# Unregistering the system
sudo subscription-manager unregister

# Cleaning up subscription-manager data
sudo subscription-manager clean

# Registering the system with specified parameters
sudo subscription-manager register --name="$(hostname -f)" --org="PLACEHOLDER" --activationkey="PLACEHOLDER" --force

# Refreshing subscription-manager
sudo subscription-manager refresh

# Enabling specified repository
sudo subscription-manager repos --enable="PLACEHOLDER"

# Refreshing subscription-manager again
sudo subscription-manager refresh

# Cleaning up yum data
sudo yum clean all

# Checking for updates with yum
sudo yum check-update

# Note: Replace "PLACEHOLDER" with your actual values for organization, activation key, and repository.
